<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Announcement Previews - Nexus ERP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sora:wght@600;700&family=Inter:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #111111; /* A deeper charcoal black */
        color: #a1a1aa; /* Softer gray for text */
      }
      .font-title {
        font-family: "Sora", sans-serif;
      }

      #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #111111;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.5s ease-out;
      }
      .loader {
        width: 48px;
        height: 48px;
        border: 3px solid #1f2937;
        border-top: 3px solid #70ffd9;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .spotlight-card {
        position: relative;
        overflow: hidden;
        background: rgba(24, 24, 27, 0.5);
      }
      .spotlight-card:before {
        content: "";
        position: absolute;
        left: var(--x, 50%);
        top: var(--y, 50%);
        transform: translate(-50%, -50%);
        background: radial-gradient(
          circle at center,
          rgba(112, 255, 217, 0.1),
          transparent 40%
        );
        width: 300px;
        height: 300px;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .spotlight-card:hover:before {
        opacity: 1;
      }
    </style>
  </head>
  <body class="opacity-0 transition-opacity duration-500">
    <div id="preloader"><div class="loader"></div></div>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <!-- HEADER -->
      <header class="mb-10 flex justify-between items-center">
        <div>
          <h1 class="text-3xl font-bold text-white font-title">Notice Board</h1>
          <p class="text-gray-500 mt-1">
            A preview of all recent announcements.
          </p>
        </div>
        <a
          href="/dashboard"
          class="bg-gray-800/50 text-gray-300 font-semibold py-2 px-5 rounded-lg hover:bg-gray-700/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-emerald-500 transition-all duration-300 ease-in-out inline-flex items-center"
        >
          <i class="fas fa-arrow-left mr-2"></i>
          Return to Dashboard
        </a>
      </header>

      <!-- ANNOUNCEMENT GRID -->
      <div
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
      >
        <% announcements.forEach(announcement => { %>
        <a
          href="/announcements/<%= announcement._id %>"
          class="spotlight-card group block bg-gray-900/50 p-6 rounded-xl border border-gray-800 hover:border-emerald-500/50 transition-all duration-300 transform hover:-translate-y-1"
        >
          <div class="flex items-start space-x-4">
            <div class="flex-shrink-0">
              <i
                class="fas fa-file-alt text-xl text-emerald-400"
                style="color: #70ffd9"
              ></i>
            </div>
            <div class="flex-grow">
              <h3
                class="text-lg font-bold text-white font-title leading-snug group-hover:text-emerald-400 transition-colors duration-300"
              >
                <%= announcement.title %>
              </h3>
            </div>
          </div>
        </a>
        <% }) %>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Pre-loader
        const preloader = document.getElementById("preloader");
        const body = document.querySelector("body");
        window.addEventListener("load", () => {
          preloader.style.opacity = "0";
          body.style.opacity = "1";
          setTimeout(() => {
            preloader.style.display = "none";
          }, 500);
        });

        // Spotlight Card Effect
        document.querySelectorAll(".spotlight-card").forEach((card) => {
          card.addEventListener("mousemove", (e) => {
            const rect = card.getBoundingClientRect();
            card.style.setProperty("--x", `${e.clientX - rect.left}px`);
            card.style.setProperty("--y", `${e.clientY - rect.top}px`);
          });
        });
      });
    </script>
  </body>
</html>
